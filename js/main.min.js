var valid=window.jQuery,Mountain,MountainRange,dt,mountainRanges,sketch;sketch=Sketch.create(),sketch.mouse.y=sketch.height,mountainRanges=[],Mountain=function(t){return this.reset(t)},Mountain.prototype.reset=function(t){return this.layer=t.layer,this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.color=t.color},MountainRange=function(t){return this.x=0,this.mountains=[],this.layer=t.layer,this.width={min:t.width.min,max:t.width.max},this.height={min:t.height.min,max:t.height.max},this.speed=t.speed,this.color=t.color,this.populate(),this},MountainRange.prototype.populate=function(){if(valid){for(var t,i,h=0,n=[];h<=sketch.width+4*this.width.max;)i=round(random(this.width.min,this.width.max)),t=round(random(this.height.min,this.height.max)),this.mountains.push(new Mountain({layer:this.layer,x:0===this.mountains.length?0:this.mountains[this.mountains.length-1].x+this.mountains[this.mountains.length-1].width,y:sketch.height-t,width:i,height:t,color:this.color})),n.push(h+=i);return n}},MountainRange.prototype.update=function(){if(valid){var t=this.mountains[0];if(t.width+t.x+this.x<-this.width.max){var i=round(random(this.width.min,this.width.max)),h=round(random(this.height.min,this.height.max)),n=this.mountains[this.mountains.length-1];return t.reset({layer:this.layer,x:n.x+n.width,y:sketch.height-h,width:i,height:h,color:this.color}),this.mountains.push(this.mountains.shift())}}},MountainRange.prototype.render=function(){if(valid){var t,i,h,n,e,s;sketch.save(),sketch.translate(this.x,(sketch.height-sketch.mouse.y)/20*this.layer),sketch.beginPath(),e=this.mountains.length;var a=10;for(sketch.moveTo(this.mountains[0].x-a,this.mountains[0].y),h=n=0,s=e-2;s>=n;h=n+=1)t=(this.mountains[h].x+this.mountains[h+1].x)/2,i=(this.mountains[h].y+this.mountains[h+1].y)/2,sketch.quadraticCurveTo(this.mountains[h].x,this.mountains[h].y,t,i);return sketch.lineTo(sketch.width-this.x,sketch.height+a),sketch.lineTo(this.x-a,sketch.height+a),sketch.closePath(),sketch.fillStyle=this.color,sketch.fill(),sketch.strokeStyle="white",sketch.lineWidth=3,sketch.stroke(),sketch.restore()}},sketch.setup=function(){if(valid){var t,i;t=3,i=[];for(var h=220,n=6,e="hsl({h}, {s}%, {l}%)";t--;)i.push(mountainRanges.push(new MountainRange({layer:t+1,width:{min:50*(t+1),max:70*(t+1)},height:{min:200-40*t,max:300-40*t},speed:.003*(t+1),color:e.supplant({h:h,s:n,l:31-7*t})})));return i}},sketch.clear=function(){return valid?sketch.clearRect(0,0,sketch.width,sketch.height):void 0},sketch.update=function(){if(valid){for(var t=mountainRanges.length,i=[];t--;)i.push(mountainRanges[t].update(t));return i}},sketch.draw=function(){if(valid){for(var t=mountainRanges.length,i=[];t--;)i.push(mountainRanges[t].render(t));return i}},$(window).on("mousemove",function(t){return sketch.mouse.y=t.pageY}),String.prototype.supplant=function(t){return this.replace(/\{([^{}]*)\}/g,function(i,h){var n=t[h];return"string"==typeof n||"number"==typeof n?n:i})};
